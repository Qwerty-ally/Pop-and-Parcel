<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pop & Parcel</title>
  <meta name="description" content="Pop & Parcel — subscription boxes with 6 variants. Monthly + gift plans." />

  <style>
    :root{
      /* Pastel theme (NO black backgrounds) */
      --bg: #ffd6ea;        /* pastel pink background */
      --card: #ffffff;      /* white cards */
      --card2: #fff6fb;     /* very light pink tint */
      --border: rgba(0,0,0,.08);

      --text: #000000;      /* black text */
      --muted: rgba(0,0,0,.65);

      --btn: #a9dcff;       /* pastel blue buttons */
      --btnHover: #97d3ff;  /* slightly deeper pastel blue */
      --btnText: #000000;

      --radius: 18px;
      --shadow: 0 12px 30px rgba(0,0,0,.12);
      --max: 1100px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: var(--bg);
      color: var(--text);
      line-height:1.5;
    }

    a{color:inherit; text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:24px;}

    /* NAV */
    .nav{
      position:sticky;
      top:0;
      background: rgba(255, 214, 234, .85);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
      z-index:50;
    }
    .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:16px;}
    .brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.2px}
    .logo{
      width:38px; height:38px; border-radius:12px;
      background: linear-gradient(135deg, #ffd1e7, #a9dcff);
      border:1px solid var(--border);
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
    }
    .links{display:flex; gap:14px; flex-wrap:wrap; align-items:center}
    .links a{color:var(--muted); font-weight:800; font-size:14px}
    .links a:hover{color:var(--text)}

    /* BUTTONS */
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 16px;
      border-radius:999px;
      border:1px solid var(--border);
      background: var(--btn);
      color: var(--btnText);
      font-weight:900;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); background: var(--btnHover)}
    .btn:active{transform: translateY(0px)}

    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 12px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.55);
      color: var(--muted);
      font-weight:900;
      font-size:13px;
    }
    .dot{width:8px; height:8px; border-radius:50%; background: #a9dcff; border:1px solid var(--border)}

    /* LAYOUT */
    .hero{
      padding:46px 0 10px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:22px;
      align-items:start;
    }
    .hero h1{
      margin:14px 0 10px;
      font-size: clamp(34px, 4.2vw, 54px);
      line-height:1.05;
      letter-spacing:-.5px;
    }
    .hero p{color: var(--muted); font-size:16px; max-width:62ch}
    .hero-actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:16px}
    .note{color: var(--muted); font-size:13px; margin-top:10px}

    .card{
      border:1px solid var(--border);
      background: var(--card);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: var(--shadow);
    }
    .card h3{margin:8px 0 6px}
    .card p{margin:0; color:var(--muted); font-size:14px}

    .hero-card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      position:relative;
      overflow:hidden;
    }
    .hero-card:before{
      content:"";
      position:absolute;
      inset:-90px -90px auto auto;
      width:240px; height:240px;
      background: radial-gradient(circle at 30% 30%, rgba(169,220,255,.70), transparent 60%);
      transform: rotate(12deg);
    }
    .hero-card:after{
      content:"";
      position:absolute;
      inset:auto auto -110px -110px;
      width:260px; height:260px;
      background: radial-gradient(circle at 70% 70%, rgba(255,180,217,.90), transparent 62%);
      transform: rotate(-8deg);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
      margin-top:16px;
    }

    .section{padding:40px 0}
    .section h2{margin:0 0 10px; font-size:28px; letter-spacing:-.2px}
    .section .sub{color:var(--muted); margin:0 0 16px; max-width:78ch}

    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(169,220,255,.60);
      border:1px solid var(--border);
      color: var(--text);
      font-size:12px;
      font-weight:950;
    }

    .product{display:flex; gap:12px; align-items:flex-start;}
    .thumb{
      width:52px; height:52px; border-radius:16px;
      background: linear-gradient(135deg, #ffd1e7, #a9dcff);
      border:1px solid var(--border);
      flex:0 0 auto;
    }

    .pricing{grid-template-columns: repeat(3, 1fr)}
    .featured{
      outline:2px solid rgba(169,220,255,.9);
      background: linear-gradient(180deg, #ffffff, #f2fbff);
    }

    .price{font-size:34px; font-weight:950; margin:10px 0 2px; letter-spacing:-.6px;}
    .small{font-size:13px; color:var(--muted)}
    ul.clean{margin:12px 0 0; padding-left:18px; color:var(--muted)}
    ul.clean li{margin:8px 0}

    /* Inputs / selects */
    .field{
      display:flex; flex-direction:column; gap:6px;
      margin-top:10px;
    }
    label{font-weight:900; font-size:13px}
    input, select{
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--border);
      background: #ffffff;
      color: var(--text);
      outline:none;
      font-weight:700;
    }
    input::placeholder{color:rgba(0,0,0,.45)}

    .cta{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      align-items:center;
      border:1px solid var(--border);
      background: rgba(255,255,255,.65);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
    }
    form.inline{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:flex-end;}
    form.inline input{border-radius:999px}

    .footer{
      padding:24px 0 40px;
      color:var(--muted);
      border-top:1px solid var(--border);
      margin-top:24px;
    }
    .footer .cols{display:flex; justify-content:space-between; gap:14px; flex-wrap:wrap}
    .footer a{color:var(--muted); font-weight:900}
    .footer a:hover{color:var(--text)}

    /* Checkout modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(255, 214, 234, .65);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:999;
    }
    .modal{
      width:min(720px, 100%);
      border:1px solid var(--border);
      background: var(--card);
      border-radius: 22px;
      box-shadow: 0 22px 60px rgba(0,0,0,.18);
      overflow:hidden;
    }
    .modal-head{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:16px 18px;
      border-bottom:1px solid var(--border);
      background: linear-gradient(90deg, rgba(255,255,255,.85), rgba(169,220,255,.35));
    }
    .modal-head h3{margin:0; font-size:18px}
    .xbtn{
      border:1px solid var(--border);
      background: #ffffff;
      border-radius: 12px;
      padding:8px 10px;
      font-weight:950;
      cursor:pointer;
    }
    .modal-body{padding:18px}
    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    .summary{
      border:1px solid var(--border);
      background: rgba(255,255,255,.75);
      border-radius: 16px;
      padding:14px;
    }
    .row{
      display:flex; justify-content:space-between; gap:10px;
      margin:8px 0;
      color: var(--muted);
      font-weight:800;
    }
    .row strong{color:var(--text)}
    .hr{height:1px; background: var(--border); margin:12px 0}
    .success{
      display:none;
      padding:18px;
      text-align:center;
    }
    .success h2{margin:6px 0 6px}
    .success p{margin:0; color:var(--muted)}

    @media (max-width: 900px){
      .hero, .cta{grid-template-columns: 1fr}
      .grid, .pricing{grid-template-columns: 1fr}
      .links{display:none}
      .split{grid-template-columns: 1fr}
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <div class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <span>Pop &amp; Parcel</span>
      </div>
      <div class="links">
        <a href="#how">How it works</a>
        <a href="#boxes">Boxes</a>
        <a href="#plans">Plans</a>
        <a href="#checkout">Checkout</a>
      </div>
      <button class="btn" id="openCheckoutTop">Checkout</button>
    </div>
  </div>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div>
        <span class="pill"><span class="dot"></span> 6 box variants • Monthly + gift plans</span>
        <h1>Pop open a surprise—every month.</h1>
        <p>
          <strong>Pop &amp; Parcel</strong> has 6 different box variants: Hair Care, Worldwide Snacks, Books,
          Stationery, Color of the Month, and Cozy Up &amp; Puzzle.
        </p>
        <div class="hero-actions">
          <a class="btn" href="#plans">Pick a plan</a>
          <a class="btn" href="#boxes">See the 6 boxes</a>
        </div>
        <div class="note">Prices range from <strong>$25</strong> to <strong>$65</strong> • Gift plans available</div>
      </div>

      <div class="card hero-card">
        <span class="badge">Quick pick</span>
        <h3 style="margin:10px 0 6px; position:relative;">Choose a box + plan</h3>
        <p style="position:relative; color:var(--muted); margin:0;">Then checkout in one click.</p>

        <div class="field" style="position:relative;">
          <label for="variantTop">Choose your box variant</label>
          <select id="variantTop">
            <option value="Hair Care Box">Hair Care Box (shampoo + conditioner)</option>
            <option value="Worldwide Snacks">Worldwide Snacks</option>
            <option value="Book Box">Book Box</option>
            <option value="Stationery Box">Stationery Box</option>
            <option value="Color of the Month">Color of the Month</option>
            <option value="Cozy Up & Puzzle">Cozy Up & Puzzle</option>
          </select>
        </div>

        <div class="field" style="position:relative;">
          <label for="planTop">Choose a plan</label>
          <select id="planTop">
            <option value="Monthly — Mini|25">Monthly — Mini ($25/mo)</option>
            <option value="Monthly — Classic|45">Monthly — Classic ($45/mo)</option>
            <option value="Monthly — Max|65">Monthly — Max ($65/mo)</option>
            <option value="Gift — 3 Months|75">Gift — 3 Months ($75)</option>
            <option value="Gift — 6 Months|135">Gift — 6 Months ($135)</option>
            <option value="Gift — 12 Months|240">Gift — 12 Months ($240)</option>
          </select>
        </div>

        <div style="position:relative; margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn" id="addToCartTop">Add to cart</button>
          <button class="btn" id="checkoutNowTop">Checkout now</button>
        </div>

        <div class="note" id="cartNoteTop" style="position:relative;"></div>
      </div>
    </section>

    <!-- HOW -->
    <section class="section" id="how">
      <h2>How it works</h2>
      <p class="sub">Pick a plan, pick a box variant, and we ship your Pop &amp; Parcel surprise.</p>

      <div class="grid">
        <div class="card">
          <span class="badge">Step 1</span>
          <h3>Choose a plan</h3>
          <p>Monthly subscriptions or prepaid gift plans.</p>
        </div>
        <div class="card">
          <span class="badge">Step 2</span>
          <h3>Select a box</h3>
          <p>Choose 1 of the 6 variants (swap anytime).</p>
        </div>
        <div class="card">
          <span class="badge">Step 3</span>
          <h3>Unbox + repeat</h3>
          <p>Ships the first week of each month.</p>
        </div>
      </div>
    </section>

    <!-- BOXES -->
    <section class="section" id="boxes">
      <h2>The 6 Pop &amp; Parcel boxes</h2>
      <p class="sub">Each variant has its own theme — pick your favorite!</p>

      <div class="grid">
        <div class="card">
          <div class="product">
            <div class="thumb" aria-hidden="true"></div>
            <div>
              <h3>Hair Care Box</h3>
              <p>Shampoo, conditioner, and hair treats to keep your hair feeling amazing.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="product">
            <div class="thumb" aria-hidden="true"></div>
            <div>
              <h3>Worldwide Snacks</h3>
              <p>Snacks from different countries — sweet, salty, and super fun.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="product">
            <div class="thumb" aria-hidden="true"></div>
            <div>
              <h3>Book Box</h3>
              <p>A book pick plus little extras for your reading vibe.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="product">
            <div class="thumb" aria-hidden="true"></div>
            <div>
              <h3>Stationery Box</h3>
              <p>Pens, stickers, notebooks, and desk goodies you’ll want to show off.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="product">
            <div class="thumb" aria-hidden="true"></div>
            <div>
              <h3>Color of the Month</h3>
              <p>Everything matches one monthly color theme — satisfying and adorable.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="product">
            <div class="thumb" aria-hidden="true"></div>
            <div>
              <h3>Cozy Up &amp; Puzzle</h3>
              <p>Cozy items plus a puzzle to do on a comfy night in.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PLANS -->
    <section class="section" id="plans">
      <h2>Plans</h2>
      <p class="sub">Choose your box variant first, then choose a plan.</p>

      <div class="card" style="margin-top:10px;">
        <div class="field" style="margin-top:0;">
          <label for="variantPicker">Choose your box variant</label>
          <select id="variantPicker">
            <option value="Hair Care Box">Hair Care Box (shampoo + conditioner)</option>
            <option value="Worldwide Snacks">Worldwide Snacks</option>
            <option value="Book Box">Book Box</option>
            <option value="Stationery Box">Stationery Box</option>
            <option value="Color of the Month">Color of the Month</option>
            <option value="Cozy Up & Puzzle">Cozy Up & Puzzle</option>
          </select>
        </div>
        <div class="note" style="margin-top:10px;">
          Your selection will be used when you click any “Add to cart” button below.
        </div>
      </div>

      <div style="height:16px;"></div>

      <h3 style="margin:0 0 10px; font-size:18px;">Monthly plans</h3>
      <div class="grid pricing">
        <div class="card">
          <span class="badge">Mini</span>
          <div class="price">$25<span class="small">/mo</span></div>
          <div class="small">Perfect starter box</div>
          <ul class="clean">
            <li>Choose 1 variant</li>
            <li>Smaller surprise set</li>
            <li>Cancel anytime</li>
          </ul>
          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="addPlanFromGrid('Monthly — Mini', 25)">Add to cart</button>
            <button class="btn" onclick="checkoutFromGrid('Monthly — Mini', 25)">Checkout</button>
          </div>
        </div>

        <div class="card featured">
          <span class="badge">Most popular</span>
          <div class="price">$45<span class="small">/mo</span></div>
          <div class="small">Best variety</div>
          <ul class="clean">
            <li>Choose 1 variant</li>
            <li>More items + value</li>
            <li>Swap variants anytime</li>
          </ul>
          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="addPlanFromGrid('Monthly — Classic', 45)">Add to cart</button>
            <button class="btn" onclick="checkoutFromGrid('Monthly — Classic', 45)">Checkout</button>
          </div>
        </div>

        <div class="card">
          <span class="badge">Max</span>
          <div class="price">$65<span class="small">/mo</span></div>
          <div class="small">Big unboxing energy</div>
          <ul class="clean">
            <li>Choose 1 variant</li>
            <li>Extra goodies</li>
            <li>Best for super fans</li>
          </ul>
          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="addPlanFromGrid('Monthly — Max', 65)">Add to cart</button>
            <button class="btn" onclick="checkoutFromGrid('Monthly — Max', 65)">Checkout</button>
          </div>
        </div>
      </div>

      <div style="height:18px;"></div>

      <h3 style="margin:0 0 10px; font-size:18px;">Gift plans</h3>
      <div class="grid pricing">
        <div class="card">
          <span class="badge">Gift</span>
          <div class="price">$75<span class="small">/3 mo</span></div>
          <div class="small">A short + sweet gift</div>
          <ul class="clean">
            <li>3 months prepaid</li>
            <li>Recipient chooses variant</li>
            <li>Gift message option</li>
          </ul>
          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="addPlanFromGrid('Gift — 3 Months', 75)">Add to cart</button>
            <button class="btn" onclick="checkoutFromGrid('Gift — 3 Months', 75)">Checkout</button>
          </div>
        </div>

        <div class="card featured">
          <span class="badge">Best gift</span>
          <div class="price">$135<span class="small">/6 mo</span></div>
          <div class="small">More surprises, more fun</div>
          <ul class="clean">
            <li>6 months prepaid</li>
            <li>Recipient chooses variant</li>
            <li>Gift message option</li>
          </ul>
          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="addPlanFromGrid('Gift — 6 Months', 135)">Add to cart</button>
            <button class="btn" onclick="checkoutFromGrid('Gift — 6 Months', 135)">Checkout</button>
          </div>
        </div>

        <div class="card">
          <span class="badge">Big gift</span>
          <div class="price">$240<span class="small">/12 mo</span></div>
          <div class="small">A full year of unboxing</div>
          <ul class="clean">
            <li>12 months prepaid</li>
            <li>Recipient chooses variant</li>
            <li>Gift message option</li>
          </ul>
          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="addPlanFromGrid('Gift — 12 Months', 240)">Add to cart</button>
            <button class="btn" onclick="checkoutFromGrid('Gift — 12 Months', 240)">Checkout</button>
          </div>
        </div>
      </div>

      <div class="note" id="cartNote" style="margin-top:12px;"></div>
    </section>

    <!-- CHECKOUT ANCHOR -->
    <section class="section" id="checkout">
      <h2>Checkout</h2>
      <p class="sub">
        Click checkout anytime to view your cart and place an order (front-end demo checkout).
      </p>
      <button class="btn" id="openCheckoutMid">Open checkout</button>
    </section>

    <!-- EMAIL CTA -->
    <section class="section">
      <div class="cta">
        <div>
          <h2 style="margin:0 0 6px;">Want first dibs on new drops?</h2>
          <p class="sub" style="margin:0;">Join the list for sneak peeks, early variants, and discounts.</p>
        </div>
        <div>
          <form class="inline" id="signupForm">
            <input id="email" type="email" placeholder="you@example.com" required />
            <button class="btn" type="submit">Join</button>
          </form>
          <div class="note" id="signupMsg" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="cols">
        <div>
          <div style="font-weight:950; color:var(--text);">Pop &amp; Parcel</div>
          <div class="small">© <span id="year"></span> • All rights reserved</div>
        </div>
        <div style="display:flex; gap:14px; flex-wrap:wrap">
          <a href="#plans">Plans</a>
          <a href="#boxes">Boxes</a>
          <a href="#checkout">Checkout</a>
        </div>
      </div>
    </footer>
  </main>

  <!-- CHECKOUT MODAL -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Checkout">
      <div class="modal-head">
        <h3>Pop &amp; Parcel Checkout</h3>
        <button class="xbtn" id="closeModal" aria-label="Close">X</button>
      </div>

      <div class="modal-body" id="modalBody">
        <div class="split" id="checkoutSplit">
          <div class="summary">
            <div style="font-weight:950;">Cart summary</div>
            <div class="hr"></div>

            <div class="row">
              <span>Variant</span>
              <strong id="sumVariant">—</strong>
            </div>
            <div class="row">
              <span>Plan</span>
              <strong id="sumPlan">—</strong>
            </div>
            <div class="row">
              <span>Price</span>
              <strong id="sumPrice">$0</strong>
            </div>

            <div class="hr"></div>

            <div class="row">
              <span>Total</span>
              <strong id="sumTotal">$0</strong>
            </div>

            <div class="note" style="margin-top:10px;">
              This is a demo checkout (front-end). Later you can connect Stripe/Shopify.
            </div>

            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn" id="clearCartBtn">Clear cart</button>
            </div>
          </div>

          <div class="summary">
            <div style="font-weight:950;">Your details</div>
            <div class="hr"></div>

            <div class="field" style="margin-top:0;">
              <label for="fullName">Full name</label>
              <input id="fullName" placeholder="Your name" />
            </div>

            <div class="field">
              <label for="emailCheckout">Email</label>
              <input id="emailCheckout" type="email" placeholder="you@example.com" />
            </div>

            <div class="field">
              <label for="address">Shipping address</label>
              <input id="address" placeholder="Street, City, State, ZIP" />
            </div>

            <div class="field">
              <label for="giftMsg">Gift message (optional)</label>
              <input id="giftMsg" placeholder="Write a cute note!" />
            </div>

            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn" id="placeOrderBtn">Place order</button>
            </div>

            <div class="note" id="checkoutMsg" role="status" aria-live="polite"></div>
          </div>
        </div>

        <div class="success" id="successScreen">
          <div class="badge">Order confirmed</div>
          <h2>Thanks for your order!</h2>
          <p id="successText">We received your Pop &amp; Parcel order.</p>
          <div style="margin-top:14px; display:flex; justify-content:center;">
            <button class="btn" id="closeAfterSuccess">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ---------- Simple Cart State (front-end demo) ----------
    let cart = {
      variant: null,
      planName: null,
      price: 0
    };

    const variantPicker = document.getElementById('variantPicker');
    const cartNote = document.getElementById('cartNote');
    const cartNoteTop = document.getElementById('cartNoteTop');

    const modalBackdrop = document.getElementById('modalBackdrop');
    const closeModal = document.getElementById('closeModal');
    const openCheckoutTop = document.getElementById('openCheckoutTop');
    const openCheckoutMid = document.getElementById('openCheckoutMid');

    const sumVariant = document.getElementById('sumVariant');
    const sumPlan = document.getElementById('sumPlan');
    const sumPrice = document.getElementById('sumPrice');
    const sumTotal = document.getElementById('sumTotal');

    const clearCartBtn = document.getElementById('clearCartBtn');
    const placeOrderBtn = document.getElementById('placeOrderBtn');
    const checkoutMsg = document.getElementById('checkoutMsg');

    const checkoutSplit = document.getElementById('checkoutSplit');
    const successScreen = document.getElementById('successScreen');
    const successText = document.getElementById('successText');
    const closeAfterSuccess = document.getElementById('closeAfterSuccess');

    function money(n){ return `$${Number(n).toFixed(0)}`; }

    function updateCartNotes(){
      const text = cart.variant && cart.planName
        ? `Cart: ${cart.variant} • ${cart.planName} • ${money(cart.price)}`
        : `Cart is empty — choose a variant + plan to add to cart.`;

      if (cartNote) cartNote.textContent = text;
      if (cartNoteTop) cartNoteTop.textContent = text;
    }

    function setCart(variant, planName, price){
      cart.variant = variant;
      cart.planName = planName;
      cart.price = Number(price) || 0;
      updateCartNotes();
    }

    function clearCart(){
      cart = { variant: null, planName: null, price: 0 };
      updateCartNotes();
    }

    function openCheckout(){
      // Fill summary
      sumVariant.textContent = cart.variant || "—";
      sumPlan.textContent = cart.planName || "—";
      sumPrice.textContent = money(cart.price || 0);
      sumTotal.textContent = money(cart.price || 0);

      // Reset checkout screens/messages
      checkoutMsg.textContent = "";
      checkoutSplit.style.display = "grid";
      successScreen.style.display = "none";

      modalBackdrop.style.display = "flex";
      modalBackdrop.setAttribute("aria-hidden", "false");
    }

    function closeCheckout(){
      modalBackdrop.style.display = "none";
      modalBackdrop.setAttribute("aria-hidden", "true");
    }

    // From plan grid: uses the main variant dropdown
    function addPlanFromGrid(planName, price){
      const variant = variantPicker.value;
      setCart(variant, planName, price);
    }

    function checkoutFromGrid(planName, price){
      const variant = variantPicker.value;
      setCart(variant, planName, price);
      openCheckout();
    }

    // Top quick pick controls
    const variantTop = document.getElementById('variantTop');
    const planTop = document.getElementById('planTop');
    const addToCartTop = document.getElementById('addToCartTop');
    const checkoutNowTop = document.getElementById('checkoutNowTop');

    function parsePlanTop(value){
      const [name, price] = value.split("|");
      return { name, price: Number(price) || 0 };
    }

    addToCartTop.addEventListener("click", () => {
      const p = parsePlanTop(planTop.value);
      setCart(variantTop.value, p.name, p.price);
    });

    checkoutNowTop.addEventListener("click", () => {
      const p = parsePlanTop(planTop.value);
      setCart(variantTop.value, p.name, p.price);
      openCheckout();
    });

    // Open/close modal buttons
    openCheckoutTop.addEventListener("click", openCheckout);
    openCheckoutMid.addEventListener("click", openCheckout);
    closeModal.addEventListener("click", closeCheckout);

    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) closeCheckout();
    });

    // Clear cart
    clearCartBtn.addEventListener("click", () => {
      clearCart();
      // Update summary live
      sumVariant.textContent = "—";
      sumPlan.textContent = "—";
      sumPrice.textContent = "$0";
      sumTotal.textContent = "$0";
      checkoutMsg.textContent = "Cart cleared.";
    });

    // Place order (demo)
    placeOrderBtn.addEventListener("click", () => {
      if (!cart.variant || !cart.planName || !cart.price){
        checkoutMsg.textContent = "Please add a plan to your cart first.";
        return;
      }

      const fullName = document.getElementById("fullName").value.trim();
      const email = document.getElementById("emailCheckout").value.trim();
      const address = document.getElementById("address").value.trim();
      const giftMsg = document.getElementById("giftMsg").value.trim();

      if (!fullName || !email || !address){
        checkoutMsg.textContent = "Please fill in your name, email, and shipping address.";
        return;
      }

      // Show success screen
      checkoutSplit.style.display = "none";
      successScreen.style.display = "block";
      successText.textContent =
        `Order: ${cart.variant} • ${cart.planName} • ${money(cart.price)}. A confirmation will be sent to ${email}.`
        + (giftMsg ? ` Gift message: "${giftMsg}"` : "");

      // Clear cart after "purchase"
      clearCart();
    });

    closeAfterSuccess.addEventListener("click", closeCheckout);

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Email signup (demo)
    const form = document.getElementById('signupForm');
    const msg = document.getElementById('signupMsg');
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      msg.textContent = `You're in! We'll email ${email} with Pop & Parcel updates.`;
      form.reset();
    });

    // Initialize notes
    updateCartNotes();
  </script>
</body>
</html>
